---
__extend: skeleton

build:
  pre:
    - "/bin/cp $CIOM_VCA_HOME/[% root.vca.version %]/pre/[% root.vca.cloudId %]/[% root.vca.appName %]/ciom.json \
      $WORKSPACE/[% root.vca.appName %]"
    - $CIOM_SCRIPT_HOME/syncup.to.slave.sh [% root.vca.version %] [% root.vca.cloudId %] [% root.vca.appName %] win
  cmds: 
    - "Job(__dotnet.app.build).run:\
      ver=[% root.vca.version %],\
      env=[% root.vca.cloudId %],\
      appName=[% root.vca.appName %]"

dispatch:
  workspace: "c:/ciomworkspace"

deploy:
  owner: ""
  group: ""
  mode: ""
  
  instance:
    extract:
#      - mkdir -p (% root.deploy.locations.%instanceIdx% %)
#      - rm -rf (% root.deploy.locations.%instanceIdx% %)/[% root.vca.appName %]
#      - tar -xzvf [% root.dispatch.workspace %]/[% root.apppkg.name %] -C (% root.deploy.locations.%instanceIdx% %)/
    chownmode: []
